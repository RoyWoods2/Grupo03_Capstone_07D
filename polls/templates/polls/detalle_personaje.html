{% extends 'polls/detail.html'%}
{% load static %}
    {% block content %}
    <head>
        <meta charset="UTF-8">
        <title>{{ personaje.nombre }}</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="{% static 'polls/css/stylePersonajes.css' %}">
        <style>
            .tab-content { display: none; } /* Oculta todas las secciones por defecto */
            .active { display: block; }     /* Muestra solo la sección activa */
            .navbar-card a {
                padding: 10px;
                text-decoration: none;
                color: #fff;
                border-bottom: 2px solid transparent;
                transition: border-bottom 0.3s;
            }
            .navbar-card a:hover, .navbar-card a.active-tab {
                border-bottom: 2px solid #007bff;
            }
        </style>
    </head>
<body> <div class="navbar-grid">
    <div class="navbar-card">
        <a href="#overview" onclick="showTab('overview')">Overview</a>
    </div>
    <div class="navbar-card">
        <a href="#strategy" onclick="showTab('strategy')">Strategy</a>
    </div>
    <div class="navbar-card">
        <a href="#frame-data" onclick="showTab('frame-data')">Frame Data</a>
    </div>
    <div class="navbar-card">
        <a href="#combos" onclick="showTab('combos')">Combos</a>
    </div>
    <div class="navbar-card">
        <a href="#resources" onclick="showTab('resources')">Resources</a>
    </div>
</div>
<div id="overview" class="overview-section">
    <h2 class="text-center">Overview</h2>
    {% filter linebreaks %}
    <p>{{ personaje.descripcion | safe}}</p>
    {% endfilter %}
   
</div>

<div class="row">
    <!-- Columna de Pros y Cons -->
    <div class="col-md-8 order-2 order-md-1">
        
        <div class="pros-cons-section">
            
            <table class="pros-cons-table w-100">
                <thead>
                    <tr>
                        <th class="pros">Pros</th>
                        <th class="cons">Cons</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <ul>
                                {% for pro in personaje.pros %}
                                    <li>{{ pro }}</li>
                                {% endfor %}
                            </ul>
                        </td>
                        <td>
                            <ul>
                                {% for con in personaje.cons %}
                                    <li>{{ con }}</li>
                                {% endfor %}
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Columna de Información del Personaje -->
    <div class="col-md-4 order-1 order-md-2 mb-4 mb-md-0">
        <div class="info-card">
            <h3 class="text-center">{{ personaje.nombre }}</h3>
            <img src="{{ personaje.imagen.url }}" alt="Imagen de {{ personaje.nombre }}" class="character-image">
        
            <table class="table custom-table table-striped mt-3">
                <thead>
                    <tr>
                        <th class="text-center" colspan="2">Detalles del Personaje</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Movimientos únicos -->
                    <tr>
                        <td class="font-weight-bold ">Unique Movement Options</td>
                        <td>
                            <ul>
                                {% for movimiento in personaje.movimientos_unicos %}
                                    <li>{{ movimiento }}</li>
                                {% endfor %}
                            </ul>
                        </td>
                    </tr>
                    <!-- Ataques más rápidos -->
                    <tr>
                        <td class="font-weight-bold ">Fastest Attacks</td>
                        <td>
                            <ul>
                                {% for ataque in personaje.ataques_rapidos %}
                                    <li>{{ ataque }}</li>
                                {% endfor %}
                            </ul>
                        </td>
                    </tr>
                    <!-- Reversales únicas -->
                    <tr>
                        <td class="font-weight-bold ">Unique Reversals</td>
                        <td>{{ personaje.reversales_unicos|default:"None" }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
</div>
        

<div id="strategy" class="tab-content">
    <div id="" class="overview-section">

    <h2>Strategy</h2>
    <p>Contenido de la sección Strategy...</p>
    </div>
</div>

<div id="frame-data" class="tab-content">    
    <div id="" class="overview-section">    
    <h2>Frame Data</h2>
    <table class="table custom-table table-striped mt-3">     
        <thead>           
            <tr> 
                <th>Referencia</th>
                <th>Movimiento</th>
                <th>Tipo</th>
                <th>Damage</th>
                <th>Startup Frames</th>
                <th>Active Frames</th>
                <th>Recovery Frames</th>
                <th>Block Advantage</th>
                <th>Hit Advantage</th>
                <th>Knockdown</th>
                <th>Video</th>
            </tr>
        </thead>
        <tbody>
            {% for frame in framedata %}
                <tr>
                    <td> <img src="{{ frame.imagen.url }}" alt="" class=""></td>
                    <td>{{ frame.movimiento }}</td>
                    <td>{{ frame.tipo }}</td>
                    <td>{{ frame.damage }}</td>
                    <td>{{ frame.startup_frames }}</td>
                    <td>{{ frame.active_frames }}</td>
                    <td>{{ frame.recovery_frames }}</td>
                    <td>{{ frame.block_advantage }}</td>
                    <td>{{ frame.hit_advantage }}</td>
                    <td>{{ frame.knockdown|yesno:"Si,No" }}</td>
                    <td>
                        {% if frame.video_demo_url %}
                            <a href="{{ frame.video_demo_url }}" target="_blank">Ver Video</a>
                        {% else %}
                            No disponible
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
</div>

<div id="combos" class="tab-content">
    <div id="" class="overview-section">
        <h2 class="text-center">Combos</h2>

        {% if combos %}
        <table class="table table-striped mt-3">
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Descripción</th>
                    <th>Dificultad</th>
                    <th>Inputs</th>
                    <th>Video de Demostración</th>
                </tr>
            </thead>
            <tbody>
                {% for combo in combos %}
                <tr>
                    <td>{{ combo.nombre }}</td>
                    <td>{{ combo.descripcion }}</td>
                    <td>{{ combo.dificultad }}</td>
                    <td>{{ combo.movimientos }}</td>
                    <td>
                        {% if combo.video %}
                        <div class="video-container">
                            <iframe src="{{ combo.video_demo_url }}" frameborder="0" allowfullscreen style="width: 150px; height: 100px;"></iframe>
                        </div>
                        {% else %}
                        <p>No hay video disponible</p>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p class="text-center">No hay combos disponibles.</p>
        {% endif %}
    </div>
</div>

<div id="resources" class="tab-content">
    <h2>Resources</h2>
    <p>Contenido de la sección Resources...</p>
</div>

<script>
    function showTab(tabId) {
        // Oculta todas las secciones
        const tabContents = document.getElementsByClassName('tab-content');
        for (let i = 0; i < tabContents.length; i++) {
            tabContents[i].classList.remove('active');
        }

        // Muestra solo la sección seleccionada
        document.getElementById(tabId).classList.add('active');

        // Actualiza la pestaña activa en la barra de navegación
        const navLinks = document.querySelectorAll('.navbar-card a');
        navLinks.forEach(link => link.classList.remove('active-tab'));
        document.querySelector(`.navbar-card a[href="#${tabId}"]`).classList.add('active-tab');
    }

    // Mostrar la sección Overview al cargar la página
    document.addEventListener("DOMContentLoaded", () => {
        showTab('overview');
    });
</script>

</body>
{% endblock  %}

</html>